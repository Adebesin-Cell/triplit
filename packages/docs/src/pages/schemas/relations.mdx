# Relations

To define a relationship between two collections, you define a subquery that describes the relationship with `RelationMany`, `RelationOne` or `RelationById`. A `RelationMany` attribute will be in the shape `Map<string, Entity>` while `RelationOne` and `RelationById` are designed for singleton relations and will be directly nested or a sub-object or `null` if an applicable entity doesn't exist. Within a relation, either in a where clause or the `RelationById` id, parameter, you can reference the current collection's attributes with `$`.

```typescript
import { Schema as S } from '@triplit/db';
const schema = {
  departments: {
    schema: S.Schema({
      id: S.Id(),
      name: S.String(),
      classes: S.RelationMany('classes', {
        where: [['department_id', '=', '$id']],
      }),
    }),
  },
  classes: {
    schema: S.Schema({
      id: S.Id(),
      name: S.String(),
      level: S.Number(),
      building: S.String(),
      department_id: S.String(),
      department: S.RelationById('department', '$department_id'),
    }),
  },
};

const query = client
  .query('departments')
  .where([['classes.building', '=', 'Voter']])
  .build();
```
